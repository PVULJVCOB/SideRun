/*
  Scroll and Parallax Effects (inspired by NoArt.)
  - IntersectionObserver-driven entrance animations
  - rAF-driven parallax translateY for elements annotated with data-scroll="parallax-*"
  - Reduced-motion support disables animations and parallax
*/

:root {
  /* Timing tokens for scroll effects */
  --scroll-ease: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --scroll-ease-ui: cubic-bezier(0.4, 0, 0.2, 1);
  --scroll-duration: 0.9s;
}

/* Use a smooth timing curve similar to the reference, but scope to animated elements only */
.scroll-init,
.visible,
[data-scroll] {
  transition-timing-function: var(--scroll-ease-ui);
}

/* Initial hidden state applied via JS */
.scroll-init {
  opacity: 0;
  transform: translateY(40px);
  transition:
    opacity var(--scroll-duration) var(--scroll-ease),
    transform var(--scroll-duration) var(--scroll-ease);
}

/* Always have transition present on scroll-annotated elements */
[data-scroll] {
  transition:
    opacity var(--scroll-duration) var(--scroll-ease),
    transform var(--scroll-duration) var(--scroll-ease);
}

/* Visible state toggled by IntersectionObserver */
.visible {
  opacity: 1;
  transform: none;
}

/* Optional: when staggering, children will receive inline transition-delays from JS */
[data-stagger-child] {
  /* ensure the same baseline transition applies */
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Directional variants: adjust initial transform */
.scroll-init[data-scroll='fade-left'] {
  transform: translateX(-60px);
  transition:
    opacity var(--scroll-duration) var(--scroll-ease),
    transform var(--scroll-duration) var(--scroll-ease);
}
.scroll-init[data-scroll='fade-right'] {
  transform: translateX(60px);
  transition:
    opacity var(--scroll-duration) var(--scroll-ease),
    transform var(--scroll-duration) var(--scroll-ease);
}
.scroll-init[data-scroll='fade-up'] {
  transform: translateY(40px);
  transition:
    opacity var(--scroll-duration) var(--scroll-ease),
    transform var(--scroll-duration) var(--scroll-ease);
}

/* Parallax base: allow 3D transforms */
[data-scroll*='parallax'] {
  transform-style: preserve-3d;
  backface-visibility: hidden;
  will-change: transform;
}

/* Sibling delay patterns (inspired by original) */
[data-scroll='fade-up'] + .section-subtitle,
.section-title[data-scroll='fade-up'] + [data-scroll='fade-up'] {
  transition-delay: 0.12s;
}

.location-info .info-block[data-scroll='fade-up'] { transition-delay: 0s; }
.location-info .info-block[data-scroll='fade-up']:nth-of-type(2) { transition-delay: 0.12s; }
.location-info .info-block[data-scroll='fade-up']:nth-of-type(3) { transition-delay: 0.24s; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .scroll-init {
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
  }
  [data-scroll*='parallax'] {
    transform: none !important;
    transition: none !important;
    will-change: auto !important;
  }
}
